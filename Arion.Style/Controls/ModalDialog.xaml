<Window
    AllowsTransparency="True"
    Background="Transparent"
    MaxWidth="420"
    Name="Root"
    SizeToContent="WidthAndHeight"
    Title="ModalDialog"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    d:DesignHeight="248"
    d:DesignWidth="420"
    mc:Ignorable="d"
    x:Class="Arion.Style.Controls.ModalDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:converters="clr-namespace:Arion.Style.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Arion.Style.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wpf="clr-namespace:Arion.Style.AttachedProperties"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Arion.Style;component/ArionUiTheme.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <converters:TextVisibilityConverter
                IsEmptyValue="Collapsed"
                IsNotEmptyValue="Visible"
                x:Key="TextVisibilityConverter" />
        </ResourceDictionary>
    </Window.Resources>
    <Border
        Background="{StaticResource CleanW}"
        BorderBrush="{StaticResource Lg2}"
        BorderThickness="1"
        CornerRadius="6"
        Padding="32">
        <!--  Background="{StaticResource Lg4}"  -->
        <Grid Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="24" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  Fill="{Binding ElementName=Root, Path=ColorIcon}"  -->
            <local:Icon
                Fill="{Binding ElementName=Root, Path=ModalIconColor}"
                Grid.Row="0"
                Height="20"
                Kind="{Binding ElementName=Root, Path=ModalIcon}"
                Margin="2,2,18,2"
                VerticalAlignment="Top"
                Visibility="{Binding ElementName=Root, Path=ModalIconVisibility}"
                Width="20" />

            <TextBlock
                FontSize="18"
                FontWeight="SemiBold"
                Grid.Column="1"
                Grid.Row="0"
                HorizontalAlignment="Left"
                Text="{Binding ElementName=Root, Path=Caption, Mode=TwoWay}"
                TextAlignment="Left"
                TextTrimming="CharacterEllipsis"
                Width="276" />

            <Button
                Click="BtnClose_OnClick"
                Foreground="{StaticResource Mg3}"
                Grid.Column="1"
                Grid.Row="0"
                Height="24"
                HorizontalAlignment="Right"
                Padding="0"
                Style="{StaticResource BtnText}"
                Width="24"
                wpf:Button.Icon="Close"
                wpf:Button.IconHeight="12"
                wpf:Button.IconWidth="12" />

            <TextBlock
                FontSize="16"
                FontWeight="Regular"
                Grid.Column="1"
                Grid.Row="1"
                Margin="0,8,0,0"
                Text="{Binding ElementName=Root, Path=Message, Mode=TwoWay}"
                TextAlignment="Left"
                Visibility="{Binding ElementName=Root, Path=Message, Converter={StaticResource TextVisibilityConverter}}" />

            <StackPanel
                Grid.Column="1"
                Grid.Row="2"
                HorizontalAlignment="Right"
                Margin="0,24,0,0"
                Orientation="Horizontal">
                <Button
                    Click="BtnOk_OnClick"
                    Content="Ок"
                    Margin="12,0,0,0"
                    Style="{StaticResource BtnFilled}"
                    x:Name="BtnOk" />
                <Button
                    Click="BtnYes_OnClick"
                    Content="Да"
                    Margin="12,0,0,0"
                    Style="{StaticResource BtnFilled}"
                    x:Name="BtnYes" />
                <Button
                    Click="BtnNo_OnClick"
                    Content="Нет"
                    Margin="12,0,0,0"
                    x:Name="BtnNo" />
                <Button
                    Click="BtnCancel_OnClick"
                    Content="Отмена"
                    Margin="12,0,0,0"
                    x:Name="BtnCancel" />
            </StackPanel>
        </Grid>
    </Border>
</Window>
